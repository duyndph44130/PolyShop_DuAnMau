<?php
class ShippingController {
    public $model;

    public function __construct() {
        $this->model = new ShippingInfoModel();
    }

    public function list() {
        $shipments = $this->model->getAllShipping();
        require './views/shipping/list.php';
    }

    public function detail($id) {
        $shipment = $this->model->getShippingById($id);
        require './views/shipping/detail.php';
    }

    public function update($id) {
        $shipment = $this->model->getShippingById($id);

        if ($_SERVER['REQUEST_METHOD'] === 'POST') {
            $newStatus = $_POST['shipping_status'] ?? '';
            if ($this->model->updateShippingStatus($id, $newStatus)) {
                header("Location: ?act=/shipping");
                exit;
            } else {
                echo "❌ Không thể cập nhật trạng thái.";
            }
        }

        require './views/shipping/edit.php';
    }
}
